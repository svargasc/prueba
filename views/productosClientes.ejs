<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos</title>
    <link rel="stylesheet" href="../public/css/productos.css">
</head>

<body>

    <header>
        <div class="container">
            <nav>
                <div class="logo"><img src="../public/img/logo.png"></div>
            </nav>
        </div>
        <hr>
    </header>
    <section class="section1">
        <div class="buscador">
            <img src="../public/img/lupa.png" alt="">
            <input type="text" name="buscador" id="buscador" placeholder="Buscar:">
        </div>
        <div class="container">
            <% for (let i=0; i < images.length; i++) { %>
                <div class="bord__card producto">
                    <div class="card">
                        <h2>
                            <%=images[i].nombre%>
                        </h2>
                        <button class="open__modal"><img src="public/img/<%=images[i].imgages%>"
                                alt="<%= images%>"></button>
                        <h2>$<%= images[i].price %>
                                <button class="añadir">Añadir</button>
                        </h2>
                    </div>
                </div>
                <%} %>
        </div>
    </section>

    <section class="modales">
        <% for (let i=0; i < images.length; i++) { %>
            <div class="modal">
                <div class="modal__container">
                    <h1>
                        <%=images[i].nombre%>
                    </h1>
                    <div class="modal__row">
                        <img src="public/img/<%=images[i].imgages%>" alt="<%= images%>">
                        <div class="modal__text">
                            <p>
                                <%= images[i].details %>
                            </p>
                            <p class="price">Precio: $<%= images[i].price %>
                            </p>
                            <div class="modal__close">
                                <a href="">X</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <%} %>
    </section>

    <div class="clear">
        <hr>
    </div>
    <footer>
        <div class="container">
            <p>copyright 2023 &#169 ServiTools</p>
        </div>
    </footer>

    <script>
        document.addEventListener("keyup", e => {

            if (e.target.matches("#buscador")) {

                if (e.key === "Escape") e.target.value = ""

                document.querySelectorAll(".producto").forEach(fruta => {

                    fruta.textContent.toLowerCase().includes(e.target.value.toLowerCase())
                        ? fruta.classList.remove("filtro")
                        : fruta.classList.add("filtro")
                })

            }


        })



        const openModal = document.querySelector('.open__modal');
        const modal = document.querySelector('.modal');
        const closeModal = document.querySelector('.modal__close');

        openModal.addEventListener('click', (e) => {
            e.preventDefault();
            modal.classList.add('modal--show');
        })

        closeModal.addEventListener('click', (e) => {
            e.preventDefault();
            modal.classList.remove('modal--show');
        })
    </script>
</body>

</html>